(this["webpackJsonpreact-bookshop"]=this["webpackJsonpreact-bookshop"]||[]).push([[0],{186:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"setGoods",(function(){return E}));var c={};n.r(c),n.d(c,"addGoodsToCart",(function(){return F})),n.d(c,"removeGoodsFromCart",(function(){return M}));var a={};n.r(a),n.d(a,"setFilter",(function(){return q})),n.d(a,"setSearchQuery",(function(){return z}));var i=n(0),o=n.n(i),s=n(32),u=n.n(s),d=n(23),j=(n(185),n(186),n(15)),l=n(153),b=n(10),O={isLoading:!1,items:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GOODS":return Object(b.a)(Object(b.a)({},e),{},{items:t.payload,isLoading:!0});case"SET_IS_LOADED":return Object(b.a)(Object(b.a)({},e),{},{isLoading:t.payload});default:return e}},f=n(162),p={items:[]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_GOODS_TO_CART":return Object(b.a)(Object(b.a)({},e),{},{items:[].concat(Object(f.a)(e.items),[t.payload])});case"REMOVE_GOODS_FROM_CART":return Object(b.a)(Object(b.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}},x={searchQuery:"",filterBy:"all"},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_QUERY":return Object(b.a)(Object(b.a)({},e),{},{searchQuery:t.payload});case"SET_FILTER":return Object(b.a)(Object(b.a)({},e),{},{filterBy:t.payload});default:return e}},g=Object(j.c)({goods:h,cart:m,filter:v}),y=function(){var e=Object(j.d)(g,Object(j.a)(l.a));return e},C=n(65),_=n.n(C),E=function(e){return{type:"SET_GOODS",payload:e}},k=n(154),S=n(155),T=n(164),w=n(161),R=n(156),I=n.n(R),L=n(321),D=n(325),G=n(157),A=n.n(G),F=function(e){return{type:"ADD_GOODS_TO_CART",payload:e}},M=function(e){return{type:"REMOVE_GOODS_FROM_CART",payload:e}},Q=n(323),B=n(322),U=n(324),H=n(303),N=n(163),P=n(4),J=function(e){var t=e.title,n=e.id,r=e.imageUrl,c=e.addedCount,a=e.removeGoodsFromCart;return Object(P.jsx)(U.a,{selection:!0,divided:!0,verticalAlign:"middle",children:Object(P.jsxs)(U.a.Item,{children:[Object(P.jsx)(U.a.Content,{floated:"right",children:Object(P.jsx)(H.a,{onClick:a.bind(undefined,n),color:"red",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),Object(P.jsx)(N.a,{avatar:!0,src:r}),Object(P.jsxs)(U.a.Content,{children:[t," (",c,")"]})]})})},V=Object(d.b)((function(e,t){var n=e.cart,r=t.id;return{addedCount:n.items.reduce((function(e,t){return e+(t.id===r?1:0)}),0)}}),(function(e){return Object(b.a)({},Object(j.b)(c,e))}))(J),Y=function(e){var t=e.totalPrice,n=e.counter,r=e.items;return Object(P.jsxs)(Q.a,{stackable:!0,children:[Object(P.jsxs)(Q.a.Item,{children:[Object(P.jsx)("img",{src:"images/logo_book.svg",alt:"Logo"}),"\xa0",Object(P.jsx)("b",{children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043a\u043d\u0438\u0433"})]}),Object(P.jsxs)(Q.a.Menu,{position:"right",children:[Object(P.jsxs)(Q.a.Item,{children:["\u0418\u0442\u043e\u0433\u043e:\xa0",Object(P.jsx)("b",{children:t}),"\xa0\u0440\u0443\u0431."]}),Object(P.jsx)(B.a,{trigger:Object(P.jsxs)(Q.a.Item,{children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430\xa0",Object(P.jsx)("b",{children:n>0&&"(".concat(n,")")})]}),content:r.map((function(e){return Object(i.createElement)(V,Object(b.a)(Object(b.a)({},e),{},{key:e.id}))})),on:"click",hideOnScroll:!0})]})]})},W=Object(d.b)((function(e){var t=e.cart;return{totalPrice:t.items.reduce((function(e,t){return e+t.price}),0),counter:t.items.length,items:A()(t.items,(function(e){return e.id}))}}),(function(e){return Object(b.a)({},Object(j.b)(c,e))}))(Y),q=function(e){return{type:"SET_FILTER",payload:e}},z=function(e){return{type:"SET_SEARCH_QUERY",payload:e}},K=n(320),X=void 0,Z=function(e){var t=e.filterBy,n=e.setFilter,r=e.searchQuery,c=e.setSearchQuery;return Object(P.jsxs)(Q.a,{secondary:!0,stackable:!0,children:[Object(P.jsx)(Q.a.Item,{active:"all"===t,onClick:n.bind(X,"all"),children:"\u0412\u0441\u0435 \u043a\u043d\u0438\u0433\u0438"}),Object(P.jsx)(Q.a.Item,{active:"popular"===t,onClick:n.bind(X,"popular"),children:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435"}),Object(P.jsx)(Q.a.Item,{active:"author"===t,onClick:n.bind(X,"author"),children:"\u041f\u043e \u0430\u0432\u0442\u043e\u0440\u0443"}),Object(P.jsx)(Q.a.Item,{active:"price_down"===t,onClick:n.bind(X,"price_down"),children:"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0446\u0435\u043d\u044b"}),Object(P.jsx)(Q.a.Item,{active:"price_up"===t,onClick:n.bind(X,"price_up"),children:"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0446\u0435\u043d\u044b"}),Object(P.jsx)(Q.a.Menu,{position:"right",children:Object(P.jsx)(Q.a.Item,{children:Object(P.jsx)(K.a,{icon:"search",onChange:function(e){return c(e.target.value)},value:r,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043d\u0438\u0433\u0430\u043c..."})})})]})},$=Object(d.b)((function(e){return{filterBy:e.filter.filterBy}}),(function(e){return Object(b.a)({},Object(j.b)(a,e))}))(Z),ee=function(e){var t=e.title,n=e.authorName,r=e.author,c=e.imageUrl,a=e.price,i=e.rating,o=e.addGoodsToCart,s=e.addedCount;return Object(P.jsxs)(D.a,{children:[Object(P.jsx)(N.a,{src:c,wrapped:!0,ui:!1}),Object(P.jsxs)(D.a.Content,{children:[Object(P.jsx)(D.a.Header,{children:t}),Object(P.jsx)(D.a.Meta,{children:Object(P.jsxs)("span",{className:"date",children:[n,"\xa0",r]})}),Object(P.jsxs)(D.a.Description,{children:[Object(P.jsx)("span",{children:"\u2605 "}),i]})]}),Object(P.jsxs)(D.a.Content,{extra:!0,children:[a,Object(P.jsx)("span",{children:" \u0440\u0443\u0431."})]}),Object(P.jsxs)(H.a,{onClick:o.bind(undefined,e),color:"green",children:["\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 ",s>0&&"(".concat(s,")")]})]})},te=Object(d.b)((function(e,t){var n=e.cart,r=t.id;return{addedCount:n.items.reduce((function(e,t){return e+(t.id===r?1:0)}),0)}}),(function(e){return Object(b.a)({},Object(j.b)(c,e))}))(ee),ne=function(e){Object(T.a)(n,e);var t=Object(w.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(S.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.setGoods;I.a.get("https://react-bookshop-a7f59-default-rtdb.firebaseio.com/books.json").then((function(t){var n=t.data;e(n)}))}},{key:"render",value:function(){var e=this.props,t=e.goods,n=e.isLoading;return Object(P.jsxs)(L.a,{children:[Object(P.jsx)(W,{}),Object(P.jsx)($,{}),Object(P.jsx)(D.a.Group,{itemsPerRow:4,doubling:!0,children:n?t.map((function(e){return Object(P.jsx)(te,Object(b.a)({},e),e.id)})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430..."})]})}}]),n}(o.a.Component),re=function(e,t,n){return function(e,t){switch(t){case"popular":return _()(e,"rating","desc");case"author":return _()(e,"author","asc");case"price_down":return _()(e,"price","desc");case"price_up":return _()(e,"price","asc");case"all":default:return e}}(function(e,t){return e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0}))}(e,n),t)},ce=Object(d.b)((function(e){var t=e.goods,n=e.filter;return{goods:t.items&&re(t.items,n.filterBy,n.searchQuery),isLoading:t.isLoading}}),(function(e){return Object(b.a)({},Object(j.b)(r,e))}))(ne);u.a.render(Object(P.jsx)(d.a,{store:y(),children:Object(P.jsx)(ce,{})}),document.getElementById("root"))}},[[302,1,2]]]);
//# sourceMappingURL=main.0cec4581.chunk.js.map